# 212.Word-Search-II

在數組中找有出現在矩陣的單詞，思路跟找單一字詞時一樣是暴搜，數組中每個單詞都要搜過一遍，如果數組中單詞的前綴一樣，會重新走一遍回溯樹，複雜度會非常高

```
a
aa
aaa
aaaa
aaaaa
...
```

更可行的做法是把所有要查找的字詞揉合成一棵字典樹，這樣會有兩個優點

```
I. 盡可能共用前綴，節省儲存空間
II. 構造樹的時候已經標記字詞結束位置，在暴搜時可以即時終止無意義的搜索，起到剪枝的效果
```

按這個思路先寫一個字典樹節點類，用所有要查找的字詞構造字典樹，再對矩陣元素做 DFS，搜到標記字詞結束的節點，將構造好的字詞加到結果中並持續向下搜索直到搜到字典樹葉子節點為止，利用字典樹結構將搜索範圍限制在字典樹範圍內，剪枝不必要的搜索並充分運用每次搜索把相同前綴的單詞用一次搜索全部搜出來

```
if (node->next[board[i][j]-'a']==NULL) return;
```

將已搜到的字詞取消標記，避免下次搜索將重複字詞加到結果集中

```
if (node->next[board[i][j]-'a']->isEnd)
{
  ret.push_back(word);
  node->next[board[i][j]-'a']->isEnd=false;
}
```

最後可以再對字典樹做一次優化，優化思路是構造字典樹時，不只標記搜索字詞的結束位置，同時事先計算搜索需要通過每個節點的總次數，每次找到一個單詞就減少搜索路徑上經過節點的次數，當路過的節點通過次數歸零時，代表不需再經過當前的節點，算法可直接做剪枝

```
if (node->next[board[i][j]-'a']->count==0) return;
```
