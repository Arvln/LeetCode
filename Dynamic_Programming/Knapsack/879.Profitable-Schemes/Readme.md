# 879.Profitable-Schemes

要在一系列不可複選的物品中挑若干個滿足指定容量，屬於01背包問題。

- 對於第i個物品如何做選擇？

可以選擇取或不取該物品，兩種對應的花費及利潤代表的數量都可以進行狀態轉移。

- 思考需要哪些狀態？

01背包問題需要代表物品位置的狀態，題目要求在有限制的人員投入之下獲取最低利潤，需要在第i件物品為止投入j人獲取k份利潤共3種狀態。

- 定義dp數組含義及推導狀態轉移方程。

直覺上會想將dp定義為在第i件物品為止投入j人獲取k份利潤，可直接計算出達成所有狀態的方法數。

```
dp[i][j][k]: the number of schemes that can be chosen in i crimes by j members participated and generates k profit.
```

依照dp數組定義列出以下狀態轉移方程。這是三層循環，檢查一下數據量發現物品數最多100個、投入人數最多100人、利潤最多10000份，複雜度約在1e8，遠超複雜度1e6會TLE的標準。

```
假設第i件物品需投入x人可獲取y份利潤。

dp[i][j][k]=dp[i-1][j][k]+dp[i-1][j-x][k-y];
```

主因是利潤維度數據量過大，提示中還有一個最小利潤最多100份，如果能修改定義將利潤轉換為最小利潤，複雜度將降至1e6，避免算法TLE。原始定義算出獲取所有利潤對應的方法數，實際上當利潤超過最小利潤後，算法並不關心實際上獲取多少利潤，因為無論獲取多少利潤都已達到最小利潤的標準，都是有效的方法，因此可修改dp數組含義。

```
dp[i][j][k]: the number of schemes that can be chosen in i crimes by j members participated and generates at least k profit.
```

依照修改後的dp數組定義列出以下狀態轉移方程。成功將利潤轉為最小利潤，將該維度數據量限制在100以內。

```
假設第i件物品需投入x人可獲取y份利潤。

dp[i][j][k]+=dp[i-1][j][k];
dp[i][j+x][min(k+y, minProfit)}+=dp[i-1][j][k];
```

- 設定邊界條件及dp初始值。

轉移方程進行加法運算，所有運算的起源需要一粒種子，否則都是0在做運算是沒有意義的。在第0件物品為止投入0人獲取0份利潤也是1種方法做為邊界條件、為方便做加法運算dp數組初始值設為0。

```
dp[0][0][0]=1;
```

- 得出結論。

截至所有物品為止獲取minProfit份利潤的方法數都是有效的，實際上可能投入n人以下任意人數完成，因此需要對所有可能投入人數做加總。

```
sum{ dp[N][i][minProfit] } for i=0,1,2, ..,n
```
