# 1411.Number-of-Ways-to-Paint-N×3-Grid

跟 #1349 思路幾乎一模一樣，這一輪狀態只跟前一輪狀態有關，每一列只有3格且每一格只有3種顏色可以上，因此僅需3*3就能列舉所有可能的狀態，可用狀態壓縮dp的思路另開一個維度表示狀態。

- 對於第i列可以做哪些選擇？

```
X X X X X [X] i
```

累加第i-1列有效上色數可以得出第i列有效上色數。

- 思考需要哪些狀態？

紀錄當前列數訊息i跟顏色分布狀態p。

- 定義dp數組含義。

```
dp[i][p]: the number of ways you can paint i-th row with pattern p.
```

- 推導狀態轉移方程。

```
dp[i][p]=dp[i][p]+dp[i-1][p'];
```

- 設定邊界條件及dp初始值。

第1列的有效上色數只要兩旁顏色不同就是1種有效上色方式，沒有前一列需要考慮。為方便做加法運算dp數組初始值給0。

```
for (int p=0; p<N; p++)
  if (rowValid(p)) dp[p]=1;
```

- 得出結論。

有效上色方法數為最後一列有效上色數加總。

```
for (int p=0; p<N; p++)
  if (rowValid(p)) ret=ret+dp[p];
```
